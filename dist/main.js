(()=>{"use strict";function l(t){if(1===t.length)return t;{const e=Math.ceil(t.length/2);let n=l(t.slice(0,e)),i=l(t.slice(e)),r=[];for(;n[0]||i[0];)n[0]<i[0]?(r.push(n[0]),n.shift()):i[0]<n[0]?(r.push(i[0]),i.shift()):n[0]==i[0]?(r.push(n[0]),r.push(i[0]),n.shift(),i.shift()):n[0]?i[0]||(r.push(n[0]),n.shift()):(r.push(i[0]),i.shift());return r}}class t{constructor(l){this.data=l,this.left=null,this.right=null}}function e(l){if(0===l.length)return null;{const n=Math.floor(l.length/2),i=new t(l[n]);return i.left=e(l.slice(0,n)),i.right=e(l.slice(n+1)),i}}const n=(l,t="",e=!0)=>{null!==l&&(null!==l.right&&n(l.right,`${t}${e?"│   ":"    "}`,!1),console.log(`${t}${e?"└── ":"┌── "}${l.data}`),null!==l.left&&n(l.left,`${t}${e?"    ":"│   "}`,!0))};let i=new class{constructor(t){this.root=function(t){let n=l(t);return e([...new Set(n)])}(t)}insert(l){!function l(e,n){if(n<e.data&&null==e.left){const l=new t(n);e.left=l}else if(n>e.data&&null==e.right){const l=new t(n);e.right=l}else{if(n<e.data)return l(e.left,n);if(n>e.data)return l(e.right,n);if(n==e.data)return void console.log("value already in tree, try another value")}}(this.root,l)}delete(l){!function l(t,e){if(console.log(t),t.left.data===e&&null===t.left.left&&null===t.left.right)t.left=null,console.log("a");else if(t.right.data===e&&null===t.right.left&&null===t.right.right)t.right=null,console.log("b");else if(t.left.data===e&&null!==t.left.left&&null===t.left.left.left&&null===t.left.left.right&&null===t.left.right)t.left=t.left.left,console.log("c");else if(t.left.data===e&&null!==t.left.right&&null===t.left.right.left&&null===t.left.right.right&&null===t.left.left)t.left=t.left.right,console.log("d");else if(t.right.data===e&&null!==t.right.left&&null===t.right.left.left&&null===t.right.left.right&&null===t.right.right)t.right=t.right.left,console.log("e");else if(t.right.data===e&&null!==t.right.right&&null===t.right.right.left&&null===t.right.right.right&&null===t.right.left)t.right=t.right.right,console.log("f");else if(t.data===e&&null!==t.left&&null!==t.right){let l=t.right,e=l;for(;null!==l.left;)e=l,l=l.left;t.data=l.data,e.left=null,console.log("g")}else{if(null===t.left||null===t.right)return console.log("value not found"),void console.log("h");if(e<t.data)return l(t.left,e);if(e>t.data)return l(t.right,e)}}(this.root,l)}}([1,7,4,23,8,9,4,3,5,7,9,67,6345,324]);i.insert(9),i.delete(677),n(i.root)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQU8sU0FBU0EsRUFBVUMsR0FDdEIsR0FBcUIsSUFBakJBLEVBQU1DLE9BQWMsT0FBT0QsRUFDMUIsQ0FDRCxNQUFNRSxFQUFPQyxLQUFLQyxLQUFLSixFQUFNQyxPQUFPLEdBSXBDLElBQUlJLEVBQWlCTixFQUZKQyxFQUFNTSxNQUFNLEVBQUdKLElBTTVCSyxFQUFrQlIsRUFGSkMsRUFBTU0sTUFBTUosSUFLMUJNLEVBQWMsR0FDbEIsS0FBT0gsRUFBZSxJQUFNRSxFQUFnQixJQUNwQ0YsRUFBZSxHQUFLRSxFQUFnQixJQUNwQ0MsRUFBWUMsS0FBS0osRUFBZSxJQUNoQ0EsRUFBZUssU0FDUkgsRUFBZ0IsR0FBS0YsRUFBZSxJQUMzQ0csRUFBWUMsS0FBS0YsRUFBZ0IsSUFDakNBLEVBQWdCRyxTQUdUTCxFQUFlLElBQU1FLEVBQWdCLElBQzVDQyxFQUFZQyxLQUFLSixFQUFlLElBQ2hDRyxFQUFZQyxLQUFLRixFQUFnQixJQUNqQ0YsRUFBZUssUUFDZkgsRUFBZ0JHLFNBRVJMLEVBQWUsR0FHZkUsRUFBZ0IsS0FDeEJDLEVBQVlDLEtBQUtKLEVBQWUsSUFDaENBLEVBQWVLLFVBSmZGLEVBQVlDLEtBQUtGLEVBQWdCLElBQ2pDQSxFQUFnQkcsU0FNeEIsT0FBT0YsQ0FDWCxDQUNKLENDcENBLE1BQU1HLEVBQ0YsV0FBQUMsQ0FBWUMsR0FDUkMsS0FBS0MsS0FBTUYsRUFDWEMsS0FBS0UsS0FBTyxLQUNaRixLQUFLRyxNQUFRLElBQ2pCLEVBMEdKLFNBQVNDLEVBQW1CbEIsR0FDeEIsR0FBcUIsSUFBakJBLEVBQU1DLE9BQ04sT0FBTyxLQUNKLENBQ0gsTUFBTWtCLEVBQWNoQixLQUFLaUIsTUFBTXBCLEVBQU1DLE9BQU8sR0FDdENvQixFQUFPLElBQUlWLEVBQUtYLEVBQU1tQixJQUk1QixPQUZBRSxFQUFLTCxLQUFPRSxFQUFtQmxCLEVBQU1NLE1BQU0sRUFBR2EsSUFDOUNFLEVBQUtKLE1BQVFDLEVBQW1CbEIsRUFBTU0sTUFBTWEsRUFBYyxJQUNuREUsQ0FDWCxDQUNKLENDOUhPLE1BQU1DLEVBQWMsQ0FBQ0MsRUFBTUMsRUFBUyxHQUFJQyxHQUFTLEtBQ3pDLE9BQVRGLElBR2UsT0FBZkEsRUFBS04sT0FDUEssRUFBWUMsRUFBS04sTUFBTyxHQUFHTyxJQUFTQyxFQUFTLE9BQVMsVUFBVSxHQUVsRUMsUUFBUUMsSUFBSSxHQUFHSCxJQUFTQyxFQUFTLE9BQVMsU0FBU0YsRUFBS1IsUUFDdEMsT0FBZFEsRUFBS1AsTUFDUE0sRUFBWUMsRUFBS1AsS0FBTSxHQUFHUSxJQUFTQyxFQUFTLE9BQVMsVUFBVSxHQUNqRSxFQ0ZGLElBQUlHLEVBQVUsSUZHUCxNQUNILFdBQUFoQixDQUFZWixHQUNSYyxLQUFLTyxLQWdHYixTQUFtQnJCLEdBQ1gsSUFBSTZCLEVBQWM5QixFQUFVQyxHQUU1QixPQUFPa0IsRUFEaUIsSUFBSyxJQUFJWSxJQUFJRCxJQUU3QyxDQXBHb0JFLENBQVUvQixFQUMxQixDQUdBLE1BQUFnQyxDQUFPbkIsSUFDSCxTQUFTb0IsRUFBa0JWLEVBQU1WLEdBQzdCLEdBQUlBLEVBQVFVLEVBQUtSLE1BQXFCLE1BQWJRLEVBQUtQLEtBQWMsQ0FDeEMsTUFBTWtCLEVBQVUsSUFBSXZCLEVBQUtFLEdBQ3pCVSxFQUFLUCxLQUFPa0IsQ0FFaEIsTUFBTyxHQUFJckIsRUFBUVUsRUFBS1IsTUFBc0IsTUFBZFEsRUFBS04sTUFBZSxDQUNoRCxNQUFNaUIsRUFBVSxJQUFJdkIsRUFBS0UsR0FDekJVLEVBQUtOLE1BQVFpQixDQUVqQixLQUFPLElBQUlyQixFQUFRVSxFQUFLUixLQUNwQixPQUFPa0IsRUFBa0JWLEVBQUtQLEtBQU1ILEdBRWpDLEdBQUlBLEVBQVFVLEVBQUtSLEtBQ3BCLE9BQU9rQixFQUFrQlYsRUFBS04sTUFBT0osR0FFbEMsR0FBSUEsR0FBU1UsRUFBS1IsS0FFckIsWUFEQVcsUUFBUUMsSUFBSSwyQ0FFaEIsQ0FDSixDQUNBTSxDQUFrQm5CLEtBQUtPLEtBQU1SLEVBQ2pDLENBRUEsT0FBT0EsSUFDSCxTQUFTb0IsRUFBa0JWLEVBQU1WLEdBSTdCLEdBSEFhLFFBQVFDLElBQUlKLEdBR1JBLEVBQUtQLEtBQUtELE9BQVNGLEdBQTRCLE9BQW5CVSxFQUFLUCxLQUFLQSxNQUFxQyxPQUFwQk8sRUFBS1AsS0FBS0MsTUFDakVNLEVBQUtQLEtBQU8sS0FDWlUsUUFBUUMsSUFBSSxVQUVYLEdBQUlKLEVBQUtOLE1BQU1GLE9BQVNGLEdBQTZCLE9BQXBCVSxFQUFLTixNQUFNRCxNQUFzQyxPQUFyQk8sRUFBS04sTUFBTUEsTUFDekVNLEVBQUtOLE1BQVEsS0FDYlMsUUFBUUMsSUFBSSxVQUdYLEdBQUlKLEVBQUtQLEtBQUtELE9BQVNGLEdBQTRCLE9BQW5CVSxFQUFLUCxLQUFLQSxNQUF5QyxPQUF4Qk8sRUFBS1AsS0FBS0EsS0FBS0EsTUFDL0MsT0FBekJPLEVBQUtQLEtBQUtBLEtBQUtDLE9BQXNDLE9BQXBCTSxFQUFLUCxLQUFLQyxNQUMxQ00sRUFBS1AsS0FBT08sRUFBS1AsS0FBS0EsS0FDMUJVLFFBQVFDLElBQUksVUFFWCxHQUFJSixFQUFLUCxLQUFLRCxPQUFTRixHQUE2QixPQUFwQlUsRUFBS1AsS0FBS0MsT0FBMkMsT0FBekJNLEVBQUtQLEtBQUtDLE1BQU1ELE1BQ2hELE9BQTFCTyxFQUFLUCxLQUFLQyxNQUFNQSxPQUFxQyxPQUFuQk0sRUFBS1AsS0FBS0EsS0FDM0NPLEVBQUtQLEtBQU9PLEVBQUtQLEtBQUtDLE1BQzFCUyxRQUFRQyxJQUFJLFVBRVgsR0FBSUosRUFBS04sTUFBTUYsT0FBU0YsR0FBNkIsT0FBcEJVLEVBQUtOLE1BQU1ELE1BQTBDLE9BQXpCTyxFQUFLTixNQUFNRCxLQUFLQSxNQUNqRCxPQUExQk8sRUFBS04sTUFBTUQsS0FBS0MsT0FBdUMsT0FBckJNLEVBQUtOLE1BQU1BLE1BQzVDTSxFQUFLTixNQUFRTSxFQUFLTixNQUFNRCxLQUM1QlUsUUFBUUMsSUFBSSxVQUVYLEdBQUlKLEVBQUtOLE1BQU1GLE9BQVNGLEdBQThCLE9BQXJCVSxFQUFLTixNQUFNQSxPQUE0QyxPQUExQk0sRUFBS04sTUFBTUEsTUFBTUQsTUFDbEQsT0FBM0JPLEVBQUtOLE1BQU1BLE1BQU1BLE9BQXNDLE9BQXBCTSxFQUFLTixNQUFNRCxLQUM3Q08sRUFBS04sTUFBUU0sRUFBS04sTUFBTUEsTUFDNUJTLFFBQVFDLElBQUksVUFNWCxHQUFJSixFQUFLUixPQUFTRixHQUF1QixPQUFkVSxFQUFLUCxNQUFnQyxPQUFmTyxFQUFLTixNQUFnQixDQUN2RSxJQUFJa0IsRUFBT1osRUFBS04sTUFDWm1CLEVBQWFELEVBQ2pCLEtBQXFCLE9BQWRBLEVBQUtuQixNQUNSb0IsRUFBYUQsRUFDYkEsRUFBT0EsRUFBS25CLEtBRWhCTyxFQUFLUixLQUFPb0IsRUFBS3BCLEtBQ2pCcUIsRUFBV3BCLEtBQU8sS0FDbEJVLFFBQVFDLElBQUksSUFDaEIsS0FFSyxJQUFrQixPQUFkSixFQUFLUCxNQUFnQyxPQUFmTyxFQUFLTixNQUdoQyxPQUZBUyxRQUFRQyxJQUFJLHdCQUNaRCxRQUFRQyxJQUFJLEtBR1gsR0FBSWQsRUFBUVUsRUFBS1IsS0FDbEIsT0FBT2tCLEVBQWtCVixFQUFLUCxLQUFNSCxHQUNqQyxHQUFLQSxFQUFRVSxFQUFLUixLQUNyQixPQUFPa0IsRUFBa0JWLEVBQUtOLE1BQU9KLEVBQ3pDLENBQ0osQ0FDQW9CLENBQWtCbkIsS0FBS08sS0FBTVIsRUFDakMsR0VuR2MsQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUFJLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsR0FBSSxLQUFNLE1BTy9EZSxFQUFRSSxPQUFPLEdBSWZKLEVBQVFTLE9BQU8sS0FDZmYsRUFBWU0sRUFBUVAsSyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvcC1iYWxhbmNlZC1iaW5hcnktc2VhcmNoLXRyZWUvLi9zcmMvbWVyZ2VTb3J0LmpzIiwid2VicGFjazovL3RvcC1iYWxhbmNlZC1iaW5hcnktc2VhcmNoLXRyZWUvLi9zcmMvYmluYXJ5U2VhcmNoVHJlZS5qcyIsIndlYnBhY2s6Ly90b3AtYmFsYW5jZWQtYmluYXJ5LXNlYXJjaC10cmVlLy4vc3JjL3ByZXR0eVByaW50LmpzIiwid2VicGFjazovL3RvcC1iYWxhbmNlZC1iaW5hcnktc2VhcmNoLXRyZWUvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIG1lcmdlU29ydChhcnJheSkge1xuICAgIGlmIChhcnJheS5sZW5ndGggPT09IDEpIHJldHVybiBhcnJheTtcbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgaGFsZiA9IE1hdGguY2VpbChhcnJheS5sZW5ndGgvMilcbiAgICAgICAgLy8gc3BsaXQgYXJyYXkgaW4gaGFsZlxuICAgICAgICBjb25zdCBsZWZ0SGFsZiA9IGFycmF5LnNsaWNlKDAsIGhhbGYpXG4gICAgICAgIC8vIGNhbGwgbWVyZ2VTb3J0IG9uIHRoZSBsZWZ0IGhhbGZcbiAgICAgICAgbGV0IHNvcnRlZExlZnRIYWxmID0gbWVyZ2VTb3J0KGxlZnRIYWxmKVxuXG4gICAgICAgIGNvbnN0IHJpZ2h0SGFsZiA9IGFycmF5LnNsaWNlKGhhbGYpXG4gICAgICAgIC8vIGNhbGwgbWVyZ2VTb3J0IG9uIHRoZSByaWdodCBoYWxmXG4gICAgICAgIGxldCBzb3J0ZWRSaWdodEhhbGYgPSBtZXJnZVNvcnQocmlnaHRIYWxmKTtcblxuICAgICAgICAvL2ZvciBlYWNoIGVsZW1lbnQgaW4gbGVmdCBoYWxmIGFuZCByaWdodCBoYWxmLCBzZWUgd2hpY2ggaXMgc21hbGxlclxuICAgICAgICBsZXQgbWVyZ2VkQXJyYXkgPSBbXTtcbiAgICAgICAgd2hpbGUgKHNvcnRlZExlZnRIYWxmWzBdIHx8IHNvcnRlZFJpZ2h0SGFsZlswXSkge1xuICAgICAgICAgICAgaWYgKHNvcnRlZExlZnRIYWxmWzBdIDwgc29ydGVkUmlnaHRIYWxmWzBdKSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkQXJyYXkucHVzaChzb3J0ZWRMZWZ0SGFsZlswXSlcbiAgICAgICAgICAgICAgICBzb3J0ZWRMZWZ0SGFsZi5zaGlmdCgpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvcnRlZFJpZ2h0SGFsZlswXSA8IHNvcnRlZExlZnRIYWxmWzBdKSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkQXJyYXkucHVzaChzb3J0ZWRSaWdodEhhbGZbMF0pXG4gICAgICAgICAgICAgICAgc29ydGVkUmlnaHRIYWxmLnNoaWZ0KClcblxuICAgICAgICAgICAgICAgIC8vIGVkZ2UgY2FzZSB3aGVyZSB0aGUgc2FtZSBudW1iZXIgaXMgYmVpbmcgY29tcGFyZWRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc29ydGVkTGVmdEhhbGZbMF0gPT0gc29ydGVkUmlnaHRIYWxmWzBdKSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkQXJyYXkucHVzaChzb3J0ZWRMZWZ0SGFsZlswXSlcbiAgICAgICAgICAgICAgICBtZXJnZWRBcnJheS5wdXNoKHNvcnRlZFJpZ2h0SGFsZlswXSlcbiAgICAgICAgICAgICAgICBzb3J0ZWRMZWZ0SGFsZi5zaGlmdCgpXG4gICAgICAgICAgICAgICAgc29ydGVkUmlnaHRIYWxmLnNoaWZ0KClcbiAgICAgICAgICAgICAgICAvLyBlZGdlIGNhc2Ugd2hlcmUgb25lIGFycmF5IGlzIGVtcHR5XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzb3J0ZWRMZWZ0SGFsZlswXSkge1xuICAgICAgICAgICAgICAgIG1lcmdlZEFycmF5LnB1c2goc29ydGVkUmlnaHRIYWxmWzBdKVxuICAgICAgICAgICAgICAgIHNvcnRlZFJpZ2h0SGFsZi5zaGlmdCgpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzb3J0ZWRSaWdodEhhbGZbMF0pIHtcbiAgICAgICAgICAgICAgICBtZXJnZWRBcnJheS5wdXNoKHNvcnRlZExlZnRIYWxmWzBdKVxuICAgICAgICAgICAgICAgIHNvcnRlZExlZnRIYWxmLnNoaWZ0KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lcmdlZEFycmF5O1xuICAgIH1cbn0iLCJpbXBvcnQgeyBtZXJnZVNvcnQgfSBmcm9tIFwiLi9tZXJnZVNvcnRcIjtcblxuaW1wb3J0IHsgcHJldHR5UHJpbnQgfSBmcm9tIFwiLi9wcmV0dHlQcmludFwiO1xuXG5jbGFzcyBOb2RlIHtcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmRhdGE9IHZhbHVlO1xuICAgICAgICB0aGlzLmxlZnQgPSBudWxsO1xuICAgICAgICB0aGlzLnJpZ2h0ID0gbnVsbDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgVHJlZSB7XG4gICAgY29uc3RydWN0b3IoYXJyYXkpIHtcbiAgICAgICAgdGhpcy5yb290ID0gYnVpbGRUcmVlKGFycmF5KTtcbiAgICB9XG5cblxuICAgIGluc2VydCh2YWx1ZSkge1xuICAgICAgICBmdW5jdGlvbiByZWN1cnNpdmVGdW5jdGlvbihub2RlLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlIDwgbm9kZS5kYXRhICYmIG5vZGUubGVmdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Tm9kZSA9IG5ldyBOb2RlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBub2RlLmxlZnQgPSBuZXdOb2RlO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID4gbm9kZS5kYXRhICYmIG5vZGUucmlnaHQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld05vZGUgPSBuZXcgTm9kZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgbm9kZS5yaWdodCA9IG5ld05vZGU7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPCBub2RlLmRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlRnVuY3Rpb24obm9kZS5sZWZ0LCB2YWx1ZSlcblxuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA+IG5vZGUuZGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWN1cnNpdmVGdW5jdGlvbihub2RlLnJpZ2h0LCB2YWx1ZSlcblxuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSBub2RlLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInZhbHVlIGFscmVhZHkgaW4gdHJlZSwgdHJ5IGFub3RoZXIgdmFsdWVcIilcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZWN1cnNpdmVGdW5jdGlvbih0aGlzLnJvb3QsIHZhbHVlKVxuICAgIH1cblxuICAgIGRlbGV0ZSh2YWx1ZSkge1xuICAgICAgICBmdW5jdGlvbiByZWN1cnNpdmVGdW5jdGlvbihub2RlLCB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2cobm9kZSlcbiAgICAgICAgICAgIC8vIGNvbnNpZGVyIGF0IGxlYXN0IHRocmVlIGNhc2VzXG4gICAgICAgICAgICAvLyBkZWxldGluZyB0aGUgbGVhZiBub2RlXG4gICAgICAgICAgICBpZiAobm9kZS5sZWZ0LmRhdGEgPT09IHZhbHVlICYmIG5vZGUubGVmdC5sZWZ0ID09PSBudWxsICYmIG5vZGUubGVmdC5yaWdodCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5vZGUubGVmdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2EnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5yaWdodC5kYXRhID09PSB2YWx1ZSAmJiBub2RlLnJpZ2h0LmxlZnQgPT09IG51bGwgJiYgbm9kZS5yaWdodC5yaWdodCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5vZGUucmlnaHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdiJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGRlbGV0aW5nIGEgYnJhbmNoIG5vZGUgd2l0aCBvbmUgbGVhZjsgcG9pbnQgdGhlIHByZWNlZGluZyBjaGlsZCB0byB0aGUgMm5kIGZvbGxvd2luZyBjaGlsZFxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5sZWZ0LmRhdGEgPT09IHZhbHVlICYmIG5vZGUubGVmdC5sZWZ0ICE9PSBudWxsICYmIG5vZGUubGVmdC5sZWZ0LmxlZnQgPT09IG51bGwgXG4gICAgICAgICAgICAgICAgJiYgbm9kZS5sZWZ0LmxlZnQucmlnaHQgPT09IG51bGwgJiYgbm9kZS5sZWZ0LnJpZ2h0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUubGVmdCA9IG5vZGUubGVmdC5sZWZ0XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2MnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5sZWZ0LmRhdGEgPT09IHZhbHVlICYmIG5vZGUubGVmdC5yaWdodCAhPT0gbnVsbCAmJiBub2RlLmxlZnQucmlnaHQubGVmdCA9PT0gbnVsbCBcbiAgICAgICAgICAgICAgICAmJiBub2RlLmxlZnQucmlnaHQucmlnaHQgPT09IG51bGwgJiYgbm9kZS5sZWZ0LmxlZnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5sZWZ0ID0gbm9kZS5sZWZ0LnJpZ2h0XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2QnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5yaWdodC5kYXRhID09PSB2YWx1ZSAmJiBub2RlLnJpZ2h0LmxlZnQgIT09IG51bGwgJiYgbm9kZS5yaWdodC5sZWZ0LmxlZnQgPT09IG51bGwgXG4gICAgICAgICAgICAgICAgJiYgbm9kZS5yaWdodC5sZWZ0LnJpZ2h0ID09PSBudWxsICYmIG5vZGUucmlnaHQucmlnaHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5yaWdodCA9IG5vZGUucmlnaHQubGVmdFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUucmlnaHQuZGF0YSA9PT0gdmFsdWUgJiYgbm9kZS5yaWdodC5yaWdodCAhPT0gbnVsbCAmJiBub2RlLnJpZ2h0LnJpZ2h0LmxlZnQgPT09IG51bGwgXG4gICAgICAgICAgICAgICAgJiYgbm9kZS5yaWdodC5yaWdodC5yaWdodCA9PT0gbnVsbCAmJiBub2RlLnJpZ2h0LmxlZnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5yaWdodCA9IG5vZGUucmlnaHQucmlnaHRcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZicpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPOiBlZGdlIGNhc2Ugd2hlcmUgcm9vdCBpcyBoYXMgb25lIGxlYWYgKHR3byBub2RlcyBvbmx5IGluIHRoZSB0cmVlKVxuICAgICAgICAgICAgLy8gLi4uIFxuXG4gICAgICAgICAgICAvLyBkZWxldGluZyBhIGJyYW5jaCB3aXRoIGJvdGggbGVhdmVzOyBnZXQgdGhlIG5leHQgcmlnaHQsIHRoZW4gbGVmdG1vc3QgaSB0aGlua1xuICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5kYXRhID09PSB2YWx1ZSAmJiBub2RlLmxlZnQgIT09IG51bGwgJiYgbm9kZS5yaWdodCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gbm9kZS5yaWdodDtcbiAgICAgICAgICAgICAgICBsZXQgdGVtcFBhcmVudCA9IHRlbXA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRlbXAubGVmdCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wUGFyZW50ID0gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IHRlbXAubGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbm9kZS5kYXRhID0gdGVtcC5kYXRhO1xuICAgICAgICAgICAgICAgIHRlbXBQYXJlbnQubGVmdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2cnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdmFsdWUgaXNuJ3QgdGhlcmVcbiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUubGVmdCA9PT0gbnVsbCB8fCBub2RlLnJpZ2h0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZhbHVlIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoJylcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA8IG5vZGUuZGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWN1cnNpdmVGdW5jdGlvbihub2RlLmxlZnQsIHZhbHVlKVxuICAgICAgICAgICAgfSBlbHNlIGlmICggdmFsdWUgPiBub2RlLmRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlRnVuY3Rpb24obm9kZS5yaWdodCwgdmFsdWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVjdXJzaXZlRnVuY3Rpb24odGhpcy5yb290LCB2YWx1ZSlcbiAgICB9XG5cblxuXG59XG5cbmZ1bmN0aW9uIGJ1aWxkVHJlZShhcnJheSkge1xuICAgICAgICBsZXQgc29ydGVkQXJyYXkgPSBtZXJnZVNvcnQoYXJyYXkpXG4gICAgICAgIGxldCByZW1vdmVkRHVwbGljYXRlcyA9IFsuLi4gbmV3IFNldChzb3J0ZWRBcnJheSldXG4gICAgICAgIHJldHVybiByZWN1cnNpdmVCdWlsZFRyZWUocmVtb3ZlZER1cGxpY2F0ZXMpXG59XG5cbmZ1bmN0aW9uIHJlY3Vyc2l2ZUJ1aWxkVHJlZShhcnJheSkge1xuICAgIGlmIChhcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIHdoYXQgZG8gaSBuZWVkIHRvIHJldHVybj8gYXJyYXk/IG5vZGU/XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbWlkZGxlSW5kZXggPSBNYXRoLmZsb29yKGFycmF5Lmxlbmd0aC8yKVxuICAgICAgICBjb25zdCByb290ID0gbmV3IE5vZGUoYXJyYXlbbWlkZGxlSW5kZXhdKVxuXG4gICAgICAgIHJvb3QubGVmdCA9IHJlY3Vyc2l2ZUJ1aWxkVHJlZShhcnJheS5zbGljZSgwLCBtaWRkbGVJbmRleCkpXG4gICAgICAgIHJvb3QucmlnaHQgPSByZWN1cnNpdmVCdWlsZFRyZWUoYXJyYXkuc2xpY2UobWlkZGxlSW5kZXggKyAxKSlcbiAgICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbnNlcnQodmFsdWUpIHtcbiAgICBmdW5jdGlvbiByZWN1cnNpdmVGdW5jdGlvbihub2RlLCB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPCBub2RlLmRhdGEgJiYgbm9kZS5sZWZ0ID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld05vZGUgPSBuZXcgTm9kZSh2YWx1ZSk7XG4gICAgICAgICAgICBub2RlLmxlZnQgPSBuZXdOb2RlO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID4gbm9kZS5kYXRhICYmIG5vZGUucmlnaHQgPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgbmV3Tm9kZSA9IG5ldyBOb2RlKHZhbHVlKTtcbiAgICAgICAgICAgIG5vZGUucmlnaHQgPSBuZXdOb2RlO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIDwgbm9kZS5kYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlRnVuY3Rpb24obm9kZS5sZWZ0KVxuICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyBub2RlLCBtYWtlIGl0IHRoZSBjaGlsZCBvZiB0aGUgcHJldmlvdXMgbm9kZSwgYW5kIHRoZSBuZXcgcm9vdCBvZiB0aGUgbmV4dCBub2Rlc1xuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID4gbm9kZS5kYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlRnVuY3Rpb24obm9kZS5yaWdodClcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSBub2RlLmRhdGEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidmFsdWUgYWxyZWFkeSBpbiB0cmVlLCB0cnkgYW5vdGhlciB2YWx1ZVwiKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVjdXJzaXZlRnVuY3Rpb24oKVxufSIsImV4cG9ydCBjb25zdCBwcmV0dHlQcmludCA9IChub2RlLCBwcmVmaXggPSBcIlwiLCBpc0xlZnQgPSB0cnVlKSA9PiB7XG4gIGlmIChub2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChub2RlLnJpZ2h0ICE9PSBudWxsKSB7XG4gICAgcHJldHR5UHJpbnQobm9kZS5yaWdodCwgYCR7cHJlZml4fSR7aXNMZWZ0ID8gXCLilIIgICBcIiA6IFwiICAgIFwifWAsIGZhbHNlKTtcbiAgfVxuICBjb25zb2xlLmxvZyhgJHtwcmVmaXh9JHtpc0xlZnQgPyBcIuKUlOKUgOKUgCBcIiA6IFwi4pSM4pSA4pSAIFwifSR7bm9kZS5kYXRhfWApO1xuICBpZiAobm9kZS5sZWZ0ICE9PSBudWxsKSB7XG4gICAgcHJldHR5UHJpbnQobm9kZS5sZWZ0LCBgJHtwcmVmaXh9JHtpc0xlZnQgPyBcIiAgICBcIiA6IFwi4pSCICAgXCJ9YCwgdHJ1ZSk7XG4gIH1cbn07IiwiLy8gaW1wb3J0IHsgTm9kZSwgVHJlZSwgYnVpbGRUcmVlIH0gZnJvbSBcIi4vYmluYXJ5U2VhcmNoVHJlZVwiO1xuaW1wb3J0IHsgVHJlZSB9IGZyb20gXCIuL2JpbmFyeVNlYXJjaFRyZWVcIjtcbmltcG9ydCB7IHByZXR0eVByaW50IH0gZnJvbSBcIi4vcHJldHR5UHJpbnRcIjtcblxuY29uc3QgdGVzdEFycmF5ID0gWzEsIDcsIDQsIDIzLCA4LCA5LCA0LCAzLCA1LCA3LCA5LCA2NywgNjM0NSwgMzI0XVxuXG5cbi8vIGJ1aWxkVHJlZSh0ZXN0QXJyYXkpXG5sZXQgbmV3VHJlZSA9IG5ldyBUcmVlKHRlc3RBcnJheSlcbi8vIHByZXR0eVByaW50KG5ld1RyZWUucm9vdClcblxubmV3VHJlZS5pbnNlcnQoOSlcbi8vIHByZXR0eVByaW50KG5ld1RyZWUucm9vdClcblxuLy8gY29uc29sZS5sb2coJ2gnKVxubmV3VHJlZS5kZWxldGUoNjc3KVxucHJldHR5UHJpbnQobmV3VHJlZS5yb290KSJdLCJuYW1lcyI6WyJtZXJnZVNvcnQiLCJhcnJheSIsImxlbmd0aCIsImhhbGYiLCJNYXRoIiwiY2VpbCIsInNvcnRlZExlZnRIYWxmIiwic2xpY2UiLCJzb3J0ZWRSaWdodEhhbGYiLCJtZXJnZWRBcnJheSIsInB1c2giLCJzaGlmdCIsIk5vZGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwidGhpcyIsImRhdGEiLCJsZWZ0IiwicmlnaHQiLCJyZWN1cnNpdmVCdWlsZFRyZWUiLCJtaWRkbGVJbmRleCIsImZsb29yIiwicm9vdCIsInByZXR0eVByaW50Iiwibm9kZSIsInByZWZpeCIsImlzTGVmdCIsImNvbnNvbGUiLCJsb2ciLCJuZXdUcmVlIiwic29ydGVkQXJyYXkiLCJTZXQiLCJidWlsZFRyZWUiLCJpbnNlcnQiLCJyZWN1cnNpdmVGdW5jdGlvbiIsIm5ld05vZGUiLCJ0ZW1wIiwidGVtcFBhcmVudCIsImRlbGV0ZSJdLCJzb3VyY2VSb290IjoiIn0=